import{v as e,V as a,G as s,T as c,x as l,p as r,q as t,t as n,g as i,S as o,K as d,O as h,_ as u,P as m,C as x,m as p,n as j,s as N,Q as v,y as f,z as g,U as y,W as k}from"./vendors.f0b839a9.js";import{r as b}from"./common.22dc9a71.js";var T=function(r){var t,n=r.data,i=r.onClick;return n?e.jsxs(a,{className:"hotel-card",onClick:i,children:[e.jsxs(a,{className:"hotel-card__media",children:[e.jsx(s,{src:n.imageUrl,className:"hotel-card__img",mode:"aspectFill"}),e.jsx(a,{className:"video-badge",children:e.jsx(c,{className:"icon",children:"\u25b6"})})]}),e.jsxs(a,{className:"hotel-card__content",children:[e.jsxs(a,{children:[e.jsxs(a,{className:"hotel-card__title-row",children:[e.jsx(c,{className:"hotel-card__name",children:n.name}),e.jsx(c,{className:"hotel-card__diamonds",children:" \u25cf\u25cf\u25cf\u25cf\u25cf"})]}),e.jsxs(a,{className:"hotel-card__stats",children:[e.jsxs(a,{className:"score-badge",children:[e.jsx(c,{className:"score-num",children:n.score}),e.jsx(c,{className:"score-text",children:n.scoreDesc})]}),e.jsxs(c,{className:"comment-text",children:[n.commentCount,"\u70b9\u8bc4 \xb7 ",n.collectionCount/1e4,"\u4e07\u6536\u85cf"]})]}),e.jsx(c,{className:"hotel-card__location",children:n.locationDesc}),e.jsx(a,{className:"hotel-card__highlight",children:e.jsx(c,{className:"highlight-content",children:"BOSS:25\u697c\u662f\u6caa\u4e0a\u77e5\u540d\u7c73\u5176\u6797\u65b0\u8363\u8bb0"})}),e.jsx(a,{className:"hotel-card__tags",children:n.tags&&l(t=n.tags).call(t,function(s,l){return e.jsx(a,{className:"tag-item ".concat(0===l?"tag-blue":""),children:e.jsx(c,{className:"tag-text",children:s})},l)})}),n.ranking&&e.jsxs(a,{className:"hotel-card__ranking",children:[e.jsx(c,{className:"rank-icon",children:"\ud83c\udfc6"}),e.jsx(c,{className:"rank-text",children:n.ranking.text})]})]}),e.jsxs(a,{className:"hotel-card__footer",children:[e.jsx(c,{className:"promo-text",children:"\u94bb\u77f3\u8d35\u5bbe\u4ef7 >"}),e.jsxs(a,{className:"price-box",children:[e.jsx(c,{className:"currency",children:"\xa5"}),e.jsx(c,{className:"price",children:n.price}),e.jsx(c,{className:"suffix",children:"\u8d77"})]})]})]})]}):null};const w=T;var _="http://1.14.207.212:8848",C=[{label:"\u4e0d\u9650",value:"all"},{label:"\xa50-150",value:"0-150"},{label:"\xa5150-300",value:"150-300"},{label:"\xa5300-600",value:"300-600"},{label:"\xa5600+",value:"600-up"}],D=[{label:"\u4e0d\u9650",value:"all"},{label:"\u4e8c\u661f/\u7ecf\u6d4e",value:"2"},{label:"\u4e09\u661f/\u8212\u9002",value:"3"},{label:"\u56db\u661f/\u9ad8\u6863",value:"4"},{label:"\u4e94\u661f/\u8c6a\u534e",value:"5"}];function S(){var s,T=r.useState([]),S=t(T,2),O=S[0],I=S[1],M=r.useState(!1),P=t(M,2),U=P[0],q=P[1],z=r.useState(1),G=t(z,2),L=G[0],W=G[1],Y=r.useState(!0),A=t(Y,2),B=A[0],E=A[1],F=r.useState({city:"\u4e0a\u6d77",checkInDate:"",checkOutDate:"",keyword:"",priceType:"all",starType:"all"}),H=t(F,2),J=H[0],K=H[1],Q=r.useState(!1),V=t(Q,2),X=V[0],$=V[1],R=r.useState({price:"all",star:"all"}),Z=t(R,2),ee=Z[0],ae=Z[1],se=function(e){var a={"0-150":{min:0,max:150},"150-300":{min:150,max:300},"300-600":{min:300,max:600},"600-up":{min:600,max:99999}};return a[e]||{min:void 0,max:void 0}};n.useLoad(function(){console.log("\u5217\u8868\u9875\u52a0\u8f7d\uff08\u4ec5\u5728\u9875\u9762\u9500\u6bc1\u540e\u91cd\u65b0\u8fdb\u5165\u65f6\u89e6\u53d1\uff09")}),n.useDidShow(function(){console.log("\u5217\u8868\u9875\u663e\u793a\uff08\u6bcf\u6b21\u5207\u56de\u6216\u8fdb\u5165\u8be5\u9875\u90fd\u4f1a\u89e6\u53d1\uff09"),ce()});var ce=function(){var e=i("hotelSearchParams");if(console.log("\u3010\u68c0\u6d4b\u7f13\u5b58\u540c\u6b65\u3011:",e),e){var a={city:e.city||"\u4e0a\u6d77",checkInDate:e.checkInDate||"",checkOutDate:e.checkOutDate||"",keyword:e.keyword||"",priceType:e.priceType||"all",starType:e.starType||"all"};K(a),ae({price:a.priceType,star:a.starType}),W(1),I([]),le(a,1)}},le=function(){var e=p(j().m(function e(a){var s,c,r,t,n,i,o,d,h,m,p,g,y,k=arguments;return j().w(function(e){while(1)switch(e.p=e.n){case 0:if(s=k.length>1&&void 0!==k[1]?k[1]:1,c=k.length>2&&void 0!==k[2]?k[2]:Te,!U){e.n=1;break}return e.a(2);case 1:return q(!0),r=se(a.priceType),t=r.min,n=r.max,i=a.city?a.city.replace(/\u5e02$/,""):"\u4e0a\u6d77",o={page:s,limit:10,city:i},a.keyword&&(o.keyword=a.keyword),a.starType&&"all"!==a.starType&&(o.star=a.starType),void 0!==t&&(o.min_price=t),void 0!==n&&(o.max_price=n),"price_low"===c&&(o.sort="price_asc"),"rating"===c&&(o.sort="price_desc"),e.p=2,e.n=3,b({url:"/hotel/list",method:"GET",data:o});case 3:d=e.v,200===d.code&&(h=d.data,m=h.list,p=h.total,g=l(m).call(m,function(e){var a,s;return x(x({},e),{},{imageUrl:null!==(a=e.cover_image)&&void 0!==a&&v(a).call(a,"http")?e.cover_image:u(s="".concat(_)).call(s,e.cover_image),tags:"string"===typeof e.tags?JSON.parse(e.tags):e.tags||[],locationDesc:e.address,score:e.score||4.8})}),I(1===s?g:function(e){var a;return u(a=[]).call(a,f(e),f(g))}),E(10*(s-1)+m.length<p)),e.n=5;break;case 4:e.p=4,y=e.v,console.error("\u5217\u8868\u52a0\u8f7d\u5931\u8d25:",y),N({title:"\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 5:return e.p=5,q(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(a){return e.apply(this,arguments)}}();n.useDidShow(function(){var e=i("hotelSearchParams");if(e){var a={city:e.city||"\u4e0a\u6d77",checkInDate:e.checkInDate||"",checkOutDate:e.checkOutDate||"",keyword:e.keyword||"",priceType:e.priceType||"all",starType:e.starType||"all"};K(a),W(1),le(a,1)}});var re=function(){if(console.log("--- \u89e6\u5e95\u4e8b\u4ef6\u6210\u529f\u89e6\u53d1 ---"),U)console.log("\u5f53\u524d\u6b63\u5728\u52a0\u8f7d\uff0c\u62e6\u622a\u8bf7\u6c42");else if(B){var e=L+1;W(e),le(J,e,Te)}else console.log("\u6ca1\u6709\u66f4\u591a\u6570\u636e\uff0c\u62e6\u622a\u8bf7\u6c42")},te=function(){var e=x(x({},J),{},{priceType:ee.price,starType:ee.star});K(e),W(1),I([]),$(!1),le(e,1)},ne=function(e){we(e),ye(""),W(1),le(J,1,e)},ie=function(){console.log("\u8fd4\u56de\u5230\u9152\u5e97\u641c\u7d22\u9996\u9875"),n.switchTab({url:"/pages/index/index",success:function(){console.log("\u6210\u529f\u8fd4\u56de\u5230\u9996\u9875")},fail:function(e){console.error("\u8fd4\u56de\u5931\u8d25:",e),N({title:"\u8fd4\u56de\u5931\u8d25",icon:"error"})}})},oe=function(e){var a=h(C).call(C,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},de=function(e){var a=h(D).call(D,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},he=function(e){var a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD";if(!e)return"";var c,l,r,t=g(a=e.replace("\u6708","-").replace("\u65e5","")).call(a),n=t.split("-"),i="",o="";return n.length>=2?(i=y(c=n[n.length-2]).call(c,2,"0"),o=y(l=n[n.length-1]).call(l,2,"0"),"MM-DD"===s?u(r="".concat(i,"-")).call(r,o):t):e},ue=["\u53cc\u5e8a\u623f","\u542b\u65e9\u9910","\u514d\u8d39\u53d6\u6d88","\u4eb2\u5b50\u4f18\u9009","\u667a\u80fd\u5bb6\u5c45","\u6c5f\u666f\u623f","\u5730\u94c1\u5468\u8fb9","\u4e94\u661f\u7ea7","\u6cf3\u6c60"],me=r.useState([]),xe=t(me,2),pe=xe[0],je=xe[1],Ne=function(e){je(function(a){var s;return d(a).call(a,e)?k(a).call(a,function(a){return a!==e}):u(s=[]).call(s,f(a),[e])})},ve=r.useState(""),fe=t(ve,2),ge=fe[0],ye=fe[1],ke=r.useState("welcome"),be=t(ke,2),Te=be[0],we=be[1],_e=[{label:"\u6b22\u8fce\u5ea6\u6392\u5e8f",value:"welcome"},{label:"\u597d\u8bc4\u4f18\u5148",value:"rating"},{label:"\u4f4e\u4ef7\u4f18\u5148",value:"price_low"}],Ce=function(e){ye(ge===e?"":e)};return e.jsxs(a,{className:"list-page",children:[e.jsxs(a,{className:"sticky-header",children:[e.jsx(a,{className:"search-bar",children:e.jsx(a,{className:"search-capsule-container",children:e.jsxs(a,{className:"search-capsule",children:[e.jsx(a,{className:"back-btn",onClick:ie,children:e.jsx(c,{className:"back-icon",children:"\u2b05"})}),e.jsxs(a,{className:"capsule-section city-section",children:[e.jsx(c,{className:"city-name",children:J.city}),e.jsx(a,{className:"section-divider"})]}),e.jsxs(a,{className:"capsule-section date-section",children:[e.jsxs(a,{className:"date-content",children:[e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u4f4f"}),e.jsx(c,{className:"date-value",children:he(J.checkInDate)||"--"})]}),e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u79bb"}),e.jsx(c,{className:"date-value",children:he(J.checkOutDate)||"--"})]})]}),e.jsx(a,{className:"section-divider right-vertical-line"})]}),e.jsx(a,{className:"capsule-section keyword-section",children:e.jsx(c,{className:"keyword-text",children:J.keyword||"\u4f4d\u7f6e/\u54c1\u724c/\u9152\u5e97"})}),e.jsx(a,{className:"search-icon-section",children:e.jsx(c,{className:"search-icon",children:"\ud83d\udd0d"})})]})})}),e.jsx(o,{className:"quick-filter-tags",scrollX:!0,showsHorizontalScrollIndicator:!1,enhanced:!0,scrollWithAnimation:!0,children:e.jsx(a,{className:"tags-container",children:l(ue).call(ue,function(s){return e.jsx(a,{className:"filter-tag ".concat(d(pe).call(pe,s)?"active":""),hoverClass:"filter-tag--hover",hoverStayTime:80,onClick:function(){return Ne(s)},children:e.jsx(c,{className:"tag-text",children:s})},s)})})}),e.jsxs(a,{className:"sort-bar",children:[e.jsxs(a,{className:"sort-item ".concat("welcome"===Te||"welcome"===ge?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Ce("welcome")},children:[e.jsx(c,{className:"sort-text",children:(null===(s=h(_e).call(_e,function(e){return e.value===Te}))||void 0===s?void 0:s.label)||"\u6b22\u8fce\u5ea6"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("distance"===ge?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Ce("distance")},children:[e.jsx(c,{className:"sort-text",children:"\u4f4d\u7f6e\u8ddd\u79bb"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("all"!==J.priceType||"all"!==J.starType?"active":""),hoverClass:"sort-item--hover",onClick:function(){return $(!0)},children:[e.jsx(c,{className:"sort-text",children:"\u4ef7\u683c/\u661f\u7ea7"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"}),("all"!==J.priceType||"all"!==J.starType)&&e.jsx(a,{className:"filter-indicator"})]}),e.jsxs(a,{className:"sort-item",hoverClass:"sort-item--hover",children:[e.jsx(c,{className:"sort-text",children:"\u7b5b\u9009"}),e.jsx(a,{className:"sort-icon",children:"\u2261"})]})]}),(J.keyword||"all"!==J.priceType||"all"!==J.starType)&&e.jsx(a,{className:"filter-summary",children:e.jsxs(c,{className:"summary-text",children:["\u5f53\u524d\u7b5b\u9009:",J.keyword&&' "'.concat(J.keyword,'"'),"all"!==J.priceType&&" \u4ef7\u683c:".concat(oe(J.priceType)),"all"!==J.starType&&" \u661f\u7ea7:".concat(de(J.starType))]})})]}),e.jsx(o,{scrollY:!0,className:"list-scroll",onScrollToLower:re,lowerThreshold:200,enhanced:!0,children:e.jsxs(a,{className:"list-content",children:[l(O).call(O,function(a){return e.jsx(w,{data:a,onClick:function(){var e,s;n.navigateTo({url:u(e=u(s="/pages/detail/index?id=".concat(a.id,"&checkIn=")).call(s,J.checkInDate,"&checkOut=")).call(e,J.checkOutDate)})}},a.id)}),e.jsx(a,{className:"loading-status-bar",children:U?e.jsx(c,{className:"status-loading",children:"\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d..."}):B?e.jsx(c,{className:"status-loading",children:"\u4e0a\u6ed1\u52a0\u8f7d\u66f4\u591a"}):e.jsxs(a,{className:"no-more-container",children:[e.jsx(a,{className:"divider-line"}),e.jsx(c,{className:"no-more-text",children:"\u5df2\u7ecf\u5230\u5e95\u5566"}),e.jsx(a,{className:"divider-line"})]})})]})}),e.jsx(m,{visible:"welcome"===ge,position:"top",onClose:function(){return ye("")},style:{top:"100px"},children:e.jsx(a,{className:"sort-dropdown",children:l(_e).call(_e,function(s){return e.jsx(a,{className:"dropdown-item ".concat(Te===s.value?"active":""),onClick:function(){return ne(s.value)},children:s.label},s.value)})})}),e.jsx(m,{visible:X,position:"bottom",round:!0,onClose:function(){return $(!1)},children:e.jsxs(a,{className:"filter-popup",children:[e.jsxs(a,{className:"popup-header",children:[e.jsx(c,{className:"title",children:"\u4ef7\u683c/\u661f\u7ea7\u7b5b\u9009"}),e.jsx(c,{className:"close",onClick:function(){return $(!1)},children:"\u2715"})]}),e.jsxs(o,{scrollY:!0,className:"popup-body",children:[e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u4ef7\u683c\u9884\u7b97"}),e.jsx(a,{className:"tags-grid",children:l(C).call(C,function(s){return e.jsx(a,{className:"tag ".concat(ee.price===s.value?"active":""),onClick:function(){return ae(function(e){return x(x({},e),{},{price:s.value})})},children:s.label},s.value)})})]}),e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u661f\u7ea7\u6807\u51c6"}),e.jsx(a,{className:"tags-grid",children:l(D).call(D,function(s){return e.jsx(a,{className:"tag ".concat(ee.star===s.value?"active":""),onClick:function(){return ae(function(e){return x(x({},e),{},{star:s.value})})},children:s.label},s.value)})})]})]}),e.jsxs(a,{className:"popup-footer",children:[e.jsx(a,{className:"btn reset",onClick:function(){return ae({price:"all",star:"all"})},children:"\u91cd\u7f6e"}),e.jsx(a,{className:"btn confirm",onClick:te,children:"\u67e5\u770b\u9152\u5e97"})]})]})})]})}export{S as default};
