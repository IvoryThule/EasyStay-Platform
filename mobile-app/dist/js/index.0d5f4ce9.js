import{p as e,V as a,I as s,T as c,y as l,q as n,v as r,t,g as i,A as o,w as d,S as u,E as h,M as m,_ as x,P as p,m as j,n as v,s as N,L as f,J as y,F as g,N as k,H as w}from"./vendors.5d021e99.js";import{r as b}from"./common.7dfb5deb.js";var T=function(n){var r,t=n.data,i=n.onClick;return t?e.jsxs(a,{className:"hotel-card",onClick:i,children:[e.jsxs(a,{className:"hotel-card__media",children:[e.jsx(s,{src:t.imageUrl,className:"hotel-card__img",mode:"aspectFill"}),e.jsx(a,{className:"video-badge",children:e.jsx(c,{className:"icon",children:"\u25b6"})})]}),e.jsxs(a,{className:"hotel-card__content",children:[e.jsxs(a,{children:[e.jsxs(a,{className:"hotel-card__title-row",children:[e.jsx(c,{className:"hotel-card__name",children:t.name}),e.jsx(c,{className:"hotel-card__diamonds",children:" \u25cf\u25cf\u25cf\u25cf\u25cf"})]}),t.score&&e.jsxs(a,{className:"hotel-card__stats",children:[e.jsxs(a,{className:"score-badge",children:[e.jsx(c,{className:"score-num",children:t.score}),e.jsx(c,{className:"score-text",children:t.scoreDesc||"\u597d\u8bc4"})]}),t.commentCount>0&&e.jsxs(c,{className:"comment-text",children:[t.commentCount,"\u70b9\u8bc4",t.collectionCount?" \xb7 ".concat(Math.floor(t.collectionCount/1e4),"\u4e07\u6536\u85cf"):""]})]}),e.jsx(c,{className:"hotel-card__location",children:t.locationDesc}),e.jsx(a,{className:"hotel-card__highlight",children:e.jsx(c,{className:"highlight-content",children:"BOSS:25\u697c\u662f\u6caa\u4e0a\u77e5\u540d\u7c73\u5176\u6797\u65b0\u8363\u8bb0"})}),e.jsx(a,{className:"hotel-card__tags",children:t.tags&&l(r=t.tags).call(r,function(s,l){return e.jsx(a,{className:"tag-item ".concat(0===l?"tag-blue":""),children:e.jsx(c,{className:"tag-text",children:s})},l)})}),t.ranking&&e.jsxs(a,{className:"hotel-card__ranking",children:[e.jsx(c,{className:"rank-icon",children:"\ud83c\udfc6"}),e.jsx(c,{className:"rank-text",children:t.ranking.text})]})]}),e.jsxs(a,{className:"hotel-card__footer",children:[e.jsx(c,{className:"promo-text",children:"\u94bb\u77f3\u8d35\u5bbe\u4ef7 >"}),e.jsxs(a,{className:"price-box",children:[e.jsx(c,{className:"currency",children:"\xa5"}),e.jsx(c,{className:"price",children:t.price}),e.jsx(c,{className:"suffix",children:"\u8d77"})]})]})]})]}):null};const _=T;var C="http://1.14.207.212:8848",D=[{label:"\u4e0d\u9650",value:"all"},{label:"\xa50-150",value:"0-150"},{label:"\xa5150-300",value:"150-300"},{label:"\xa5300-600",value:"300-600"},{label:"\xa5600+",value:"600-up"}],S=[{label:"\u4e0d\u9650",value:"all"},{label:"\u4e8c\u661f/\u7ecf\u6d4e",value:"2"},{label:"\u4e09\u661f/\u8212\u9002",value:"3"},{label:"\u56db\u661f/\u9ad8\u6863",value:"4"},{label:"\u4e94\u661f/\u8c6a\u534e",value:"5"}];function I(){var s,T=n.useState([]),I=r(T,2),O=I[0],M=I[1],L=n.useState(!1),P=r(L,2),q=P[0],A=P[1],E=n.useState(1),F=r(E,2),H=F[0],J=F[1],U=n.useState(!0),Y=r(U,2),z=Y[0],B=Y[1],G=n.useState({city:"\u4e0a\u6d77",checkInDate:"",checkOutDate:"",keyword:"",priceType:"all",starType:"all"}),R=r(G,2),V=R[0],W=R[1],X=n.useState(!1),K=r(X,2),Q=K[0],Z=K[1],$=n.useState({price:"all",star:"all"}),ee=r($,2),ae=ee[0],se=ee[1],ce=function(e){var a={"0-150":{min:0,max:150},"150-300":{min:150,max:300},"300-600":{min:300,max:600},"600-up":{min:600,max:99999}};return a[e]||{min:void 0,max:void 0}},le=n.useRef(!1);t.useLoad(function(){console.log("\u5217\u8868\u9875\u52a0\u8f7d\uff08\u4ec5\u5728\u9875\u9762\u9500\u6bc1\u540e\u91cd\u65b0\u8fdb\u5165\u65f6\u89e6\u53d1\uff09")}),t.useDidShow(function(){console.log("\u5217\u8868\u9875\u663e\u793a\uff08\u6bcf\u6b21\u5207\u56de\u6216\u8fdb\u5165\u8be5\u9875\u90fd\u4f1a\u89e6\u53d1\uff09"),le.current||(le.current=!0,ne())});var ne=function(){var e=i("hotelSearchParams");console.log("\u3010\u68c0\u6d4b\u7f13\u5b58\u540c\u6b65\u3011:",e);var a={city:"",checkInDate:(null===e||void 0===e?void 0:e.checkInDate)||"",checkOutDate:(null===e||void 0===e?void 0:e.checkOutDate)||"",keyword:(null===e||void 0===e?void 0:e.keyword)||"",priceType:(null===e||void 0===e?void 0:e.priceType)||"all",starType:(null===e||void 0===e?void 0:e.starType)||"all"};W(a),se({price:a.priceType,star:a.starType}),J(1),M([]),re(a,1)},re=function(){var e=j(v().m(function e(a){var s,c,n,r,t,i,o,u,h,m,p,j,g=arguments;return v().w(function(e){while(1)switch(e.p=e.n){case 0:if(s=g.length>1&&void 0!==g[1]?g[1]:1,c=g.length>2&&void 0!==g[2]?g[2]:Ce,!q){e.n=1;break}return e.a(2);case 1:return A(!0),n=ce(a.priceType),r=n.min,t=n.max,i={page:s,limit:10},a.keyword&&(i.keyword=a.keyword),a.starType&&"all"!==a.starType&&(i.star=a.starType),void 0!==r&&(i.min_price=r),void 0!==t&&(i.max_price=t),"price_low"===c&&(i.sort="price_asc"),"rating"===c&&(i.sort="price_desc"),e.p=2,e.n=3,b({url:"/hotel/list",method:"GET",data:i});case 3:o=e.v,200===o.code&&(u=o.data,h=u.list,m=u.total,p=l(h).call(h,function(e){var a,s;return d(d({},e),{},{imageUrl:null!==(a=e.cover_image)&&void 0!==a&&f(a).call(a,"http")?e.cover_image:x(s="".concat(C)).call(s,e.cover_image),tags:"string"===typeof e.tags?JSON.parse(e.tags):e.tags||[],locationDesc:e.address,score:e.score})}),M(1===s?p:function(e){var a;return x(a=[]).call(a,y(e),y(p))}),B(10*(s-1)+h.length<m)),e.n=5;break;case 4:e.p=4,j=e.v,console.error("\u5217\u8868\u52a0\u8f7d\u5931\u8d25:",j),N({title:"\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 5:return e.p=5,A(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(a){return e.apply(this,arguments)}}();t.useDidShow(function(){var e=i("hotelSearchParams");if(e){var a={city:e.city||"\u4e0a\u6d77",checkInDate:e.checkInDate||"",checkOutDate:e.checkOutDate||"",keyword:e.keyword||"",priceType:e.priceType||"all",starType:e.starType||"all"};W(a),J(1),re(a,1)}});var te=function(){if(console.log("--- \u89e6\u5e95\u4e8b\u4ef6\u6210\u529f\u89e6\u53d1 ---"),q)console.log("\u5f53\u524d\u6b63\u5728\u52a0\u8f7d\uff0c\u62e6\u622a\u8bf7\u6c42");else if(z){var e=H+1;J(e),re(V,e,Ce)}else console.log("\u6ca1\u6709\u66f4\u591a\u6570\u636e\uff0c\u62e6\u622a\u8bf7\u6c42")},ie=function(e){var a=d(d({},V),{},{keyword:g(e).call(e)});W(a),J(1),M([]),re(a,1)},oe=function(){var e=d(d({},V),{},{priceType:ae.price,starType:ae.star});W(e),J(1),M([]),Z(!1),re(e,1)},de=function(e){De(e),be(""),J(1),re(V,1,e)},ue=function(){console.log("\u8fd4\u56de\u5230\u9152\u5e97\u641c\u7d22\u9996\u9875"),t.switchTab({url:"/pages/index/index",success:function(){console.log("\u6210\u529f\u8fd4\u56de\u5230\u9996\u9875")},fail:function(e){console.error("\u8fd4\u56de\u5931\u8d25:",e),N({title:"\u8fd4\u56de\u5931\u8d25",icon:"error"})}})},he=function(e){var a=m(D).call(D,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},me=function(e){var a=m(S).call(S,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},xe=function(e){var a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD";if(!e)return"";var c,l,n,r=g(a=e.replace("\u6708","-").replace("\u65e5","")).call(a),t=r.split("-"),i="",o="";return t.length>=2?(i=k(c=t[t.length-2]).call(c,2,"0"),o=k(l=t[t.length-1]).call(l,2,"0"),"MM-DD"===s?x(n="".concat(i,"-")).call(n,o):r):e},pe=["\u53cc\u5e8a\u623f","\u542b\u65e9\u9910","\u514d\u8d39\u53d6\u6d88","\u4eb2\u5b50\u4f18\u9009","\u667a\u80fd\u5bb6\u5c45","\u6c5f\u666f\u623f","\u5730\u94c1\u5468\u8fb9","\u4e94\u661f\u7ea7","\u6cf3\u6c60"],je=n.useState([]),ve=r(je,2),Ne=ve[0],fe=ve[1],ye=function(e){fe(function(a){var s;return h(a).call(a,e)?w(a).call(a,function(a){return a!==e}):x(s=[]).call(s,y(a),[e])})},ge=n.useState(""),ke=r(ge,2),we=ke[0],be=ke[1],Te=n.useState("welcome"),_e=r(Te,2),Ce=_e[0],De=_e[1],Se=[{label:"\u6b22\u8fce\u5ea6\u6392\u5e8f",value:"welcome"},{label:"\u597d\u8bc4\u4f18\u5148",value:"rating"},{label:"\u4f4e\u4ef7\u4f18\u5148",value:"price_low"}],Ie=function(e){be(we===e?"":e)};return e.jsxs(a,{className:"list-page",children:[e.jsxs(a,{className:"sticky-header",children:[e.jsx(a,{className:"search-bar",children:e.jsx(a,{className:"search-capsule-container",children:e.jsxs(a,{className:"search-capsule",children:[e.jsx(a,{className:"back-btn",onClick:ue,children:e.jsx(c,{className:"back-icon",children:"\u2b05"})}),e.jsxs(a,{className:"capsule-section city-section",children:[e.jsx(c,{className:"city-name",children:V.city}),e.jsx(a,{className:"section-divider"})]}),e.jsxs(a,{className:"capsule-section date-section",children:[e.jsxs(a,{className:"date-content",children:[e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u4f4f"}),e.jsx(c,{className:"date-value",children:xe(V.checkInDate)||"--"})]}),e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u79bb"}),e.jsx(c,{className:"date-value",children:xe(V.checkOutDate)||"--"})]})]}),e.jsx(a,{className:"section-divider right-vertical-line"})]}),e.jsxs(a,{className:"capsule-section keyword-section",children:[e.jsx(c,{className:"search-prefix-icon",children:"\ue8b6"}),e.jsx(o,{className:"keyword-input",placeholder:"\u57ce\u5e02/\u4f4d\u7f6e/\u54c1\u724c/\u9152\u5e97\u540d",placeholderClass:"keyword-placeholder",value:V.keyword,onInput:function(e){return W(function(a){return d(d({},a),{},{keyword:e.detail.value})})},onConfirm:function(e){return ie(e.detail.value)},confirmType:"search"}),V.keyword?e.jsx(a,{className:"keyword-clear",onClick:function(){return ie("")},children:e.jsx(c,{children:"\xd7"})}):null]}),e.jsx(a,{className:"search-icon-section",onClick:function(){return ie(V.keyword)},children:e.jsx(c,{className:"search-icon",children:"\u641c\u7d22"})})]})})}),e.jsx(u,{className:"quick-filter-tags",scrollX:!0,showsHorizontalScrollIndicator:!1,enhanced:!0,scrollWithAnimation:!0,children:e.jsx(a,{className:"tags-container",children:l(pe).call(pe,function(s){return e.jsx(a,{className:"filter-tag ".concat(h(Ne).call(Ne,s)?"active":""),hoverClass:"filter-tag--hover",hoverStayTime:80,onClick:function(){return ye(s)},children:e.jsx(c,{className:"tag-text",children:s})},s)})})}),e.jsxs(a,{className:"sort-bar",children:[e.jsxs(a,{className:"sort-item ".concat("welcome"===Ce||"welcome"===we?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Ie("welcome")},children:[e.jsx(c,{className:"sort-text",children:(null===(s=m(Se).call(Se,function(e){return e.value===Ce}))||void 0===s?void 0:s.label)||"\u6b22\u8fce\u5ea6"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("distance"===we?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Ie("distance")},children:[e.jsx(c,{className:"sort-text",children:"\u4f4d\u7f6e\u8ddd\u79bb"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("all"!==V.priceType||"all"!==V.starType?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Z(!0)},children:[e.jsx(c,{className:"sort-text",children:"\u4ef7\u683c/\u661f\u7ea7"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"}),("all"!==V.priceType||"all"!==V.starType)&&e.jsx(a,{className:"filter-indicator"})]}),e.jsxs(a,{className:"sort-item",hoverClass:"sort-item--hover",children:[e.jsx(c,{className:"sort-text",children:"\u7b5b\u9009"}),e.jsx(a,{className:"sort-icon",children:"\u2261"})]})]}),(V.keyword||"all"!==V.priceType||"all"!==V.starType)&&e.jsx(a,{className:"filter-summary",children:e.jsxs(c,{className:"summary-text",children:["\u5f53\u524d\u7b5b\u9009:",V.keyword&&' "'.concat(V.keyword,'"'),"all"!==V.priceType&&" \u4ef7\u683c:".concat(he(V.priceType)),"all"!==V.starType&&" \u661f\u7ea7:".concat(me(V.starType))]})})]}),e.jsx(u,{scrollY:!0,className:"list-scroll",onScrollToLower:te,lowerThreshold:200,enhanced:!0,children:e.jsxs(a,{className:"list-content",children:[l(O).call(O,function(a){return e.jsx(_,{data:a,onClick:function(){var e,s;t.navigateTo({url:x(e=x(s="/pages/detail/index?id=".concat(a.id,"&checkIn=")).call(s,V.checkInDate,"&checkOut=")).call(e,V.checkOutDate)})}},a.id)}),e.jsx(a,{className:"loading-status-bar",children:q?e.jsx(c,{className:"status-loading",children:"\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d..."}):z?e.jsx(c,{className:"status-loading",children:"\u4e0a\u6ed1\u52a0\u8f7d\u66f4\u591a"}):e.jsxs(a,{className:"no-more-container",children:[e.jsx(a,{className:"divider-line"}),e.jsx(c,{className:"no-more-text",children:"\u5df2\u7ecf\u5230\u5e95\u5566"}),e.jsx(a,{className:"divider-line"})]})})]})}),e.jsx(p,{visible:"welcome"===we,position:"top",onClose:function(){return be("")},style:{top:"100px"},children:e.jsx(a,{className:"sort-dropdown",children:l(Se).call(Se,function(s){return e.jsx(a,{className:"dropdown-item ".concat(Ce===s.value?"active":""),onClick:function(){return de(s.value)},children:s.label},s.value)})})}),e.jsx(p,{visible:Q,position:"bottom",round:!0,onClose:function(){return Z(!1)},children:e.jsxs(a,{className:"filter-popup",children:[e.jsxs(a,{className:"popup-header",children:[e.jsx(c,{className:"title",children:"\u4ef7\u683c/\u661f\u7ea7\u7b5b\u9009"}),e.jsx(c,{className:"close",onClick:function(){return Z(!1)},children:"\u2715"})]}),e.jsxs(u,{scrollY:!0,className:"popup-body",children:[e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u4ef7\u683c\u9884\u7b97"}),e.jsx(a,{className:"tags-grid",children:l(D).call(D,function(s){return e.jsx(a,{className:"tag ".concat(ae.price===s.value?"active":""),onClick:function(){return se(function(e){return d(d({},e),{},{price:s.value})})},children:s.label},s.value)})})]}),e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u661f\u7ea7\u6807\u51c6"}),e.jsx(a,{className:"tags-grid",children:l(S).call(S,function(s){return e.jsx(a,{className:"tag ".concat(ae.star===s.value?"active":""),onClick:function(){return se(function(e){return d(d({},e),{},{star:s.value})})},children:s.label},s.value)})})]})]}),e.jsxs(a,{className:"popup-footer",children:[e.jsx(a,{className:"btn reset",onClick:function(){return se({price:"all",star:"all"})},children:"\u91cd\u7f6e"}),e.jsx(a,{className:"btn confirm",onClick:oe,children:"\u67e5\u770b\u9152\u5e97"})]})]})})]})}export{I as default};
