import{u as e,V as a,I as l,T as c,A as s,v as r,x as n,t,g as i,U as o,G as d,C as u,y as h,S as m,F as x,O as p,_ as v,P as j,o as N,p as f,s as y,J as g,b as k,K as b,W as T,Q as w}from"./vendors.b3871b3f.js";import{r as _}from"./common.5a71e493.js";var C=function(r){var n,t=r.data,i=r.onClick;return t?e.jsxs(a,{className:"hotel-card",onClick:i,children:[e.jsxs(a,{className:"hotel-card__media",children:[e.jsx(l,{src:t.imageUrl,className:"hotel-card__img",mode:"aspectFill"}),e.jsx(a,{className:"video-badge",children:e.jsx(c,{className:"icon",children:"\u25b6"})})]}),e.jsxs(a,{className:"hotel-card__content",children:[e.jsxs(a,{children:[e.jsxs(a,{className:"hotel-card__title-row",children:[e.jsx(c,{className:"hotel-card__name",children:t.name}),e.jsx(c,{className:"hotel-card__diamonds",children:" \u25cf\u25cf\u25cf\u25cf\u25cf"})]}),t.score&&e.jsxs(a,{className:"hotel-card__stats",children:[e.jsxs(a,{className:"score-badge",children:[e.jsx(c,{className:"score-num",children:t.score}),e.jsx(c,{className:"score-text",children:t.scoreDesc||"\u597d\u8bc4"})]}),t.commentCount>0&&e.jsxs(c,{className:"comment-text",children:[t.commentCount,"\u70b9\u8bc4",t.collectionCount?" \xb7 ".concat(Math.floor(t.collectionCount/1e4),"\u4e07\u6536\u85cf"):""]})]}),e.jsx(c,{className:"hotel-card__location",children:t.locationDesc}),e.jsx(a,{className:"hotel-card__highlight",children:e.jsx(c,{className:"highlight-content",children:"BOSS:25\u697c\u662f\u6caa\u4e0a\u77e5\u540d\u7c73\u5176\u6797\u65b0\u8363\u8bb0"})}),e.jsx(a,{className:"hotel-card__tags",children:t.tags&&s(n=t.tags).call(n,function(l,s){return e.jsx(a,{className:"tag-item ".concat(0===s?"tag-blue":""),children:e.jsx(c,{className:"tag-text",children:l})},s)})}),t.ranking&&e.jsxs(a,{className:"hotel-card__ranking",children:[e.jsx(c,{className:"rank-icon",children:"\ud83c\udfc6"}),e.jsx(c,{className:"rank-text",children:t.ranking.text})]})]}),e.jsxs(a,{className:"hotel-card__footer",children:[e.jsx(c,{className:"promo-text",children:"\u94bb\u77f3\u8d35\u5bbe\u4ef7 >"}),e.jsxs(a,{className:"price-box",children:[e.jsx(c,{className:"currency",children:"\xa5"}),e.jsx(c,{className:"price",children:t.price}),e.jsx(c,{className:"suffix",children:"\u8d77"})]})]})]})]}):null};const S=C;var D="http://1.14.207.212:8848",I=[{label:"\u4e0d\u9650",value:"all"},{label:"\xa50-150",value:"0-150"},{label:"\xa5150-300",value:"150-300"},{label:"\xa5300-600",value:"300-600"},{label:"\xa5600+",value:"600-up"}],O=[{label:"\u4e0d\u9650",value:"all"},{label:"\u4e8c\u661f/\u7ecf\u6d4e",value:"2"},{label:"\u4e09\u661f/\u8212\u9002",value:"3"},{label:"\u56db\u661f/\u9ad8\u6863",value:"4"},{label:"\u4e94\u661f/\u8c6a\u534e",value:"5"}];function M(){var l,C=r.useState([]),M=n(C,2),B=M[0],P=M[1],U=r.useState(!1),$=n(U,2),A=$[0],F=$[1],G=r.useState(1),J=n(G,2),L=J[0],R=J[1],W=r.useState(!0),Y=n(W,2),q=Y[0],z=Y[1],E=r.useState({city:"",checkInDate:"",checkOutDate:"",keyword:"",priceType:"all",starType:"all"}),H=n(E,2),K=H[0],Q=H[1],V=r.useState(!1),X=n(V,2),Z=X[0],ee=X[1],ae=r.useState({price:"all",star:"all"}),le=n(ae,2),ce=le[0],se=le[1],re=function(e){var a={"0-150":{min:0,max:150},"150-300":{min:150,max:300},"300-600":{min:300,max:600},"600-up":{min:600,max:99999}};return a[e]||{min:void 0,max:void 0}},ne=r.useRef(!1),te=r.useRef("");t.useLoad(function(){console.log("\u5217\u8868\u9875\u52a0\u8f7d\uff08\u4ec5\u5728\u9875\u9762\u9500\u6bc1\u540e\u91cd\u65b0\u8fdb\u5165\u65f6\u89e6\u53d1\uff09")}),t.useDidShow(function(){console.log("\u5217\u8868\u9875\u663e\u793a\uff08\u6bcf\u6b21\u5207\u56de\u6216\u8fdb\u5165\u8be5\u9875\u90fd\u4f1a\u89e6\u53d1\uff09");var e=i("hotelSearchParams")||{},a=o(e);(!ne.current||a&&a!==te.current)&&(ne.current=!0,te.current=a,ie(e))});var ie=function(e){var a,l=e||i("hotelSearchParams")||{};console.log("\u3010\u68c0\u6d4b\u7f13\u5b58\u540c\u6b65\u3011:",l);var c=d(a=String(l.city||"").replace(/\u5e02$/,"")).call(a),s={city:c,checkInDate:(null===l||void 0===l?void 0:l.checkInDate)||"",checkOutDate:(null===l||void 0===l?void 0:l.checkOutDate)||"",keyword:(null===l||void 0===l?void 0:l.keyword)||"",priceType:(null===l||void 0===l?void 0:l.priceType)||"all",starType:(null===l||void 0===l?void 0:l.starType)||"all"};Q(s),se({price:s.priceType,star:s.starType}),be([]),z(!0),R(1),P([]),oe(s,1,Oe,[])},oe=function(){var e=N(f().m(function e(a){var l,c,r,n,t,i,o,u,m,p,j,N,T,C,S,I,O,M,B,U,$,G,J,L,R,W=arguments;return f().w(function(e){while(1)switch(e.p=e.n){case 0:if(o=W.length>1&&void 0!==W[1]?W[1]:1,u=W.length>2&&void 0!==W[2]?W[2]:Oe,m=W.length>3&&void 0!==W[3]?W[3]:ke,!A){e.n=1;break}return e.a(2);case 1:return F(!0),p=re(a.priceType),j=p.min,N=p.max,T=s(l=g(c=m||[]).call(c,function(e){return"\u4e94\u661f\u7ea7"!==e})).call(l,function(e){return fe[e]||e}),C=g(r=v(n=[a.keyword]).call(n,b(T))).call(r,Boolean).join(" "),S={page:o,limit:10},a.city&&(S.city=d(t=String(a.city).replace(/\u5e02$/,"")).call(t)),C&&(S.keyword=C),a.starType&&"all"!==a.starType&&(S.star=a.starType),a.starType&&"all"!==a.starType||!x(i=m||[]).call(i,"\u4e94\u661f\u7ea7")||(S.star="5"),void 0!==j&&(S.min_price=j),void 0!==N&&(S.max_price=N),"price_low"===u&&(S.sort="price_asc"),"rating"===u&&(S.sort="price_desc"),e.p=2,e.n=3,_({url:"/hotel/list",method:"GET",data:S});case 3:I=e.v,200===I.code&&(O=I.data,M=O.list,B=O.total,U=s(M).call(M,function(e){var a,l,c=e.tags||[];if("string"===typeof e.tags)try{c=JSON.parse(e.tags)}catch(r){var s;c=g(s=e.tags.split(/[\u3001,|/ ]+/)).call(s,Boolean)}return h(h({},e),{},{imageUrl:null!==(a=e.cover_image)&&void 0!==a&&k(a).call(a,"http")?e.cover_image:v(l="".concat(D)).call(l,e.cover_image),tags:c,locationDesc:e.address,score:e.score})}),"rating"===u&&(U=w($=b(U)).call($,function(e,a){return Number(a.score||0)-Number(e.score||0)})),"distance"===u&&a.city&&(L=d(G=String(a.city).replace(/\u5e02$/,"")).call(G),U=w(J=b(U)).call(J,function(e,a){var l,c,s=x(l=String(e.city||"")).call(l,L)?0:1,r=x(c=String(a.city||"")).call(c,L)?0:1;return s-r})),P(1===o?U:function(e){var a;return v(a=[]).call(a,b(e),b(U))}),z(10*(o-1)+M.length<B)),e.n=5;break;case 4:e.p=4,R=e.v,console.error("\u5217\u8868\u52a0\u8f7d\u5931\u8d25:",R),y({title:"\u52a0\u8f7d\u5931\u8d25",icon:"none"});case 5:return e.p=5,F(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(a){return e.apply(this,arguments)}}(),de=function(){if(console.log("--- \u89e6\u5e95\u4e8b\u4ef6\u6210\u529f\u89e6\u53d1 ---"),A)console.log("\u5f53\u524d\u6b63\u5728\u52a0\u8f7d\uff0c\u62e6\u622a\u8bf7\u6c42");else if(q){var e=L+1;R(e),oe(K,e,Oe,ke)}else console.log("\u6ca1\u6709\u66f4\u591a\u6570\u636e\uff0c\u62e6\u622a\u8bf7\u6c42")},ue=function(e){var a=h(h({},K),{},{keyword:d(e).call(e)});Q(a),R(1),P([]),oe(a,1,Oe,ke)},he=function(){var e=h(h({},K),{},{priceType:ce.price,starType:ce.star});Q(e),R(1),P([]),ee(!1),oe(e,1,Oe,ke)},me=function(e){Me(e),Se(""),R(1),oe(K,1,e,ke)},xe=function(){console.log("\u8fd4\u56de\u5230\u9152\u5e97\u641c\u7d22\u9996\u9875"),t.switchTab({url:"/pages/index/index",success:function(){console.log("\u6210\u529f\u8fd4\u56de\u5230\u9996\u9875")},fail:function(e){console.error("\u8fd4\u56de\u5931\u8d25:",e),y({title:"\u8fd4\u56de\u5931\u8d25",icon:"error"})}})},pe=function(e){var a=p(I).call(I,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},ve=function(e){var a=p(O).call(O,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},je=function(e){var a,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD";if(!e)return"";var c,s,r,n=d(a=e.replace("\u6708","-").replace("\u65e5","")).call(a),t=n.split("-"),i="",o="";return t.length>=2?(i=T(c=t[t.length-2]).call(c,2,"0"),o=T(s=t[t.length-1]).call(s,2,"0"),"MM-DD"===l?v(r="".concat(i,"-")).call(r,o):n):e},Ne=["\u53cc\u5e8a\u623f","\u542b\u65e9\u9910","\u514d\u8d39\u53d6\u6d88","\u4eb2\u5b50\u4f18\u9009","\u667a\u80fd\u5bb6\u5c45","\u6c5f\u666f\u623f","\u5730\u94c1\u5468\u8fb9","\u4e94\u661f\u7ea7","\u6cf3\u6c60"],fe={"\u53cc\u5e8a\u623f":"\u53cc\u5e8a","\u542b\u65e9\u9910":"\u65e9\u9910","\u514d\u8d39\u53d6\u6d88":"\u514d\u8d39\u53d6\u6d88","\u4eb2\u5b50\u4f18\u9009":"\u4eb2\u5b50","\u667a\u80fd\u5bb6\u5c45":"\u667a\u80fd","\u6c5f\u666f\u623f":"\u6c5f\u666f","\u5730\u94c1\u5468\u8fb9":"\u5730\u94c1","\u6cf3\u6c60":"\u6cf3\u6c60"},ye=r.useState([]),ge=n(ye,2),ke=ge[0],be=ge[1],Te=function(e){var a=[];be(function(l){var c;return a=x(l).call(l,e)?g(l).call(l,function(a){return a!==e}):v(c=[]).call(c,b(l),[e]),a});var l=h(h({},K),{},{starType:x(a).call(a,"\u4e94\u661f\u7ea7")?"5":"5"===K.starType?"all":K.starType});Q(l),R(1),P([]),oe(l,1,Oe,a)},we=r.useState(""),_e=n(we,2),Ce=_e[0],Se=_e[1],De=r.useState("welcome"),Ie=n(De,2),Oe=Ie[0],Me=Ie[1],Be=[{label:"\u6b22\u8fce\u5ea6\u6392\u5e8f",value:"welcome"},{label:"\u597d\u8bc4\u4f18\u5148",value:"rating"},{label:"\u4f4e\u4ef7\u4f18\u5148",value:"price_low"}],Pe=function(e){"distance"!==e?Se(Ce===e?"":e):me("distance")};return e.jsxs(a,{className:"list-page",children:[e.jsxs(a,{className:"sticky-header",children:[e.jsx(a,{className:"search-bar",children:e.jsx(a,{className:"search-capsule-container",children:e.jsxs(a,{className:"search-capsule",children:[e.jsx(a,{className:"back-btn",onClick:xe,children:e.jsx(c,{className:"back-icon",children:"\u2b05"})}),e.jsxs(a,{className:"capsule-section city-section",children:[e.jsx(c,{className:"city-name",children:K.city||"\u4e0d\u9650\u57ce\u5e02"}),e.jsx(a,{className:"section-divider"})]}),e.jsxs(a,{className:"capsule-section date-section",children:[e.jsxs(a,{className:"date-content",children:[e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u4f4f"}),e.jsx(c,{className:"date-value",children:je(K.checkInDate)||"--"})]}),e.jsxs(a,{className:"date-container",children:[e.jsx(c,{className:"date-label",children:"\u79bb"}),e.jsx(c,{className:"date-value",children:je(K.checkOutDate)||"--"})]})]}),e.jsx(a,{className:"section-divider right-vertical-line"})]}),e.jsxs(a,{className:"capsule-section keyword-section",children:[e.jsx(c,{className:"search-prefix-icon",children:"\ue8b6"}),e.jsx(u,{className:"keyword-input",placeholder:"\u57ce\u5e02/\u4f4d\u7f6e/\u54c1\u724c/\u9152\u5e97\u540d",placeholderClass:"keyword-placeholder",value:K.keyword,onInput:function(e){return Q(function(a){return h(h({},a),{},{keyword:e.detail.value})})},onConfirm:function(e){return ue(e.detail.value)},confirmType:"search"}),K.keyword?e.jsx(a,{className:"keyword-clear",onClick:function(){return ue("")},children:e.jsx(c,{children:"\xd7"})}):null]}),e.jsx(a,{className:"search-icon-section",onClick:function(){return ue(K.keyword)},children:e.jsx(c,{className:"search-icon",children:"\u641c\u7d22"})})]})})}),e.jsx(m,{className:"quick-filter-tags",scrollX:!0,showsHorizontalScrollIndicator:!1,enhanced:!0,scrollWithAnimation:!0,children:e.jsx(a,{className:"tags-container",children:s(Ne).call(Ne,function(l){return e.jsx(a,{className:"filter-tag ".concat(x(ke).call(ke,l)?"active":""),hoverClass:"filter-tag--hover",hoverStayTime:80,onClick:function(){return Te(l)},children:e.jsx(c,{className:"tag-text",children:l})},l)})})}),e.jsxs(a,{className:"sort-bar",children:[e.jsxs(a,{className:"sort-item ".concat("welcome"===Oe||"welcome"===Ce?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Pe("welcome")},children:[e.jsx(c,{className:"sort-text",children:(null===(l=p(Be).call(Be,function(e){return e.value===Oe}))||void 0===l?void 0:l.label)||"\u6b22\u8fce\u5ea6"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("distance"===Oe?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Pe("distance")},children:[e.jsx(c,{className:"sort-text",children:"\u4f4d\u7f6e\u8ddd\u79bb"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("all"!==K.priceType||"all"!==K.starType?"active":""),hoverClass:"sort-item--hover",onClick:function(){return ee(!0)},children:[e.jsx(c,{className:"sort-text",children:"\u4ef7\u683c/\u661f\u7ea7"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"}),("all"!==K.priceType||"all"!==K.starType)&&e.jsx(a,{className:"filter-indicator"})]}),e.jsxs(a,{className:"sort-item",hoverClass:"sort-item--hover",children:[e.jsx(c,{className:"sort-text",children:"\u7b5b\u9009"}),e.jsx(a,{className:"sort-icon",children:"\u2261"})]})]}),(K.city||K.keyword||"all"!==K.priceType||"all"!==K.starType)&&e.jsx(a,{className:"filter-summary",children:e.jsxs(c,{className:"summary-text",children:["\u5f53\u524d\u7b5b\u9009:",K.city&&" \u57ce\u5e02:".concat(K.city),K.keyword&&' "'.concat(K.keyword,'"'),"all"!==K.priceType&&" \u4ef7\u683c:".concat(pe(K.priceType)),"all"!==K.starType&&" \u661f\u7ea7:".concat(ve(K.starType))]})})]}),e.jsx(m,{scrollY:!0,className:"list-scroll",onScrollToLower:de,lowerThreshold:200,enhanced:!0,children:e.jsxs(a,{className:"list-content",children:[s(B).call(B,function(a){return e.jsx(S,{data:a,onClick:function(){var e,l;t.navigateTo({url:v(e=v(l="/pages/detail/index?id=".concat(a.id,"&checkIn=")).call(l,K.checkInDate,"&checkOut=")).call(e,K.checkOutDate)})}},a.id)}),e.jsx(a,{className:"loading-status-bar",children:A?e.jsx(c,{className:"status-loading",children:"\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d..."}):q?e.jsx(c,{className:"status-loading",children:"\u4e0a\u6ed1\u52a0\u8f7d\u66f4\u591a"}):e.jsxs(a,{className:"no-more-container",children:[e.jsx(a,{className:"divider-line"}),e.jsx(c,{className:"no-more-text",children:"\u5df2\u7ecf\u5230\u5e95\u5566"}),e.jsx(a,{className:"divider-line"})]})})]})}),e.jsx(j,{visible:"welcome"===Ce,position:"top",onClose:function(){return Se("")},style:{top:"100px"},children:e.jsx(a,{className:"sort-dropdown",children:s(Be).call(Be,function(l){return e.jsx(a,{className:"dropdown-item ".concat(Oe===l.value?"active":""),onClick:function(){return me(l.value)},children:l.label},l.value)})})}),e.jsx(j,{visible:Z,position:"bottom",round:!0,onClose:function(){return ee(!1)},children:e.jsxs(a,{className:"filter-popup",children:[e.jsxs(a,{className:"popup-header",children:[e.jsx(c,{className:"title",children:"\u4ef7\u683c/\u661f\u7ea7\u7b5b\u9009"}),e.jsx(c,{className:"close",onClick:function(){return ee(!1)},children:"\u2715"})]}),e.jsxs(m,{scrollY:!0,className:"popup-body",children:[e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u4ef7\u683c\u9884\u7b97"}),e.jsx(a,{className:"tags-grid",children:s(I).call(I,function(l){return e.jsx(a,{className:"tag ".concat(ce.price===l.value?"active":""),onClick:function(){return se(function(e){return h(h({},e),{},{price:l.value})})},children:l.label},l.value)})})]}),e.jsxs(a,{className:"section",children:[e.jsx(c,{className:"section-title",children:"\u661f\u7ea7\u6807\u51c6"}),e.jsx(a,{className:"tags-grid",children:s(O).call(O,function(l){return e.jsx(a,{className:"tag ".concat(ce.star===l.value?"active":""),onClick:function(){return se(function(e){return h(h({},e),{},{star:l.value})})},children:l.label},l.value)})})]})]}),e.jsxs(a,{className:"popup-footer",children:[e.jsx(a,{className:"btn reset",onClick:function(){return se({price:"all",star:"all"})},children:"\u91cd\u7f6e"}),e.jsx(a,{className:"btn confirm",onClick:he,children:"\u67e5\u770b\u9152\u5e97"})]})]})})]})}export{M as default};
