import{q as e,V as a,I as c,T as s,x as l,l as n,n as t,t as r,H as i,o,J as d,K as u,p as h,w as m,L as p,M as x,S as j,z as N,N as v,P as f,D as y,O as g,Q as k}from"./vendors.6a759175.js";var b=function(n){var t,r=n.data,i=n.onClick;return r?e.jsxs(a,{className:"hotel-card",onClick:i,children:[e.jsx(a,{className:"hotel-card__media",children:e.jsx(c,{src:r.imageUrl,className:"hotel-card__img",mode:"aspectFill"})}),e.jsxs(a,{className:"hotel-card__content",children:[e.jsx(s,{className:"hotel-card__name",children:r.name}),e.jsxs(a,{className:"hotel-card__stats",children:[e.jsxs(s,{className:"score",children:[r.score,"\u5206"]}),e.jsx(s,{className:"desc",children:r.scoreDesc}),e.jsxs(s,{className:"comment",children:[r.commentCount,"\u70b9\u8bc4"]})]}),e.jsx(s,{className:"hotel-card__location",children:r.locationDesc}),e.jsx(a,{className:"hotel-card__tags",children:r.tags&&l(t=r.tags).call(t,function(a,c){return e.jsx(s,{className:"tag",children:a},c)})}),e.jsx(a,{className:"hotel-card__footer",children:e.jsxs(a,{className:"price-box",children:[e.jsx(s,{className:"currency",children:"\xa5"}),e.jsx(s,{className:"price",children:r.price}),e.jsx(s,{className:"suffix",children:"\u8d77"})]})})]})]}):null};const T=b;var w=[{label:"\u4e0d\u9650",value:"all"},{label:"\xa50-150",value:"0-150"},{label:"\xa5150-300",value:"150-300"},{label:"\xa5300-600",value:"300-600"},{label:"\xa5600+",value:"600-up"}],C=[{label:"\u4e0d\u9650",value:"all"},{label:"\u4e8c\u661f/\u7ecf\u6d4e",value:"2"},{label:"\u4e09\u661f/\u8212\u9002",value:"3"},{label:"\u56db\u661f/\u9ad8\u6863",value:"4"},{label:"\u4e94\u661f/\u8c6a\u534e",value:"5"}];function D(){var c,b=n.useState([]),D=t(b,2),_=D[0],S=D[1],I=n.useState(!0),M=t(I,2),O=M[0],U=M[1],P=n.useState(1),R=t(P,2),L=R[0],q=R[1],z=n.useState(!0),A=t(z,2),H=A[0],Y=A[1],F=n.useState({city:"\u4e0a\u6d77",checkInDate:"",checkOutDate:"",keyword:"",priceType:"all",starType:"all"}),J=t(F,2),K=J[0],Q=J[1],V=n.useState(!1),W=t(V,2),X=W[0],$=W[1],B=n.useState({price:"all",star:"all"}),E=t(B,2),G=E[0],Z=E[1];r.useLoad(function(){console.log("\u5217\u8868\u9875\u52a0\u8f7d"),ee()}),r.useDidShow(function(){console.log("\u5217\u8868\u9875\u663e\u793a");var e=i("hotelSearchParams");e&&console.log("\u4ece\u7f13\u5b58\u83b7\u53d6\u5230\u53c2\u6570:",e)});var ee=function(){var e={city:"\u4e0a\u6d77",checkInDate:"",checkOutDate:"",keyword:"",priceType:"all",starType:"all"},a=i("hotelSearchParams");if(a)console.log("\u4ece\u7f13\u5b58\u83b7\u53d6\u53c2\u6570:",a),e=o(o(o({},e),a),{},{city:a.city||"\u4e0a\u6d77",checkInDate:a.checkInDate||"",checkOutDate:a.checkOutDate||"",keyword:a.keyword||"",priceType:a.priceType||"all",starType:a.starType||"all"});else{var c,s=(null===(c=d().router)||void 0===c?void 0:c.params)||{};console.log("\u4ece\u8def\u7531\u53c2\u6570\u83b7\u53d6:",s),u(s).length>0&&(e=o(o({},e),{},{city:decodeURIComponent(s.city||"\u4e0a\u6d77"),checkInDate:decodeURIComponent(s.checkInDate||""),checkOutDate:decodeURIComponent(s.checkOutDate||""),keyword:decodeURIComponent(s.keyword||""),priceType:s.priceType||"all",starType:s.starType||"all"}))}console.log("\u6700\u7ec8\u4f7f\u7528\u7684\u53c2\u6570:",e),Q(e),Z({price:e.priceType,star:e.starType}),ae(e,1)},ae=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;U(!0),console.log("\u8c03\u7528API\u53c2\u6570:",o(o({},e),{},{page:a})),console.log("\u641c\u7d22\u6761\u4ef6:",{"\u57ce\u5e02":e.city,"\u5173\u952e\u8bcd":e.keyword,"\u4ef7\u683c\u8303\u56f4":e.priceType,"\u661f\u7ea7":e.starType}),h(function(){var c=ce(a,e);S(1===a?c:function(e){var a;return m(a=[]).call(a,p(e),p(c))}),U(!1),Y(10===c.length)},800)},ce=function(e,a){var c,s="600-up"===a.priceType?800:300;return l(c=x({length:10})).call(c,function(c,l){var n,t,r;return{id:m(n="".concat(e,"-")).call(n,l),name:m(t=m(r="".concat(a.city,"\u6a21\u62df\u9152\u5e97-")).call(r,e,"-")).call(t,l+1),imageUrl:"https://modao.cc/agent-py/media/generated_images/2026-02-04/354e4c83e3b445bba8a31a4d2d7c0700.jpg",score:4.8,scoreDesc:"\u8d85\u68d2",commentCount:1e3+5*l,collectionCount:5e3,locationDesc:"\u8ddd\u5e02\u4e2d\u5fc3 ".concat(l+1,".5km"),tags:["\u514d\u8d39\u53d6\u6d88","\u8fd1\u5730\u94c1"],price:s+50*l,originalPrice:s+50*l+200,ranking:0===l?{text:"\u4eba\u6c14\u699c No.1",type:"gold"}:null}})},se=function(){if(!O&&H){var e=L+1;q(e),ae(K,e)}},le=function(){var e=o(o({},K),{},{priceType:G.price,starType:G.star});Q(e),q(1),S([]),$(!1),ae(e,1)},ne=function(){console.log("\u8fd4\u56de\u5230\u9152\u5e97\u641c\u7d22\u9996\u9875"),r.switchTab({url:"/pages/index/index",success:function(){console.log("\u6210\u529f\u8fd4\u56de\u5230\u9996\u9875")},fail:function(e){console.error("\u8fd4\u56de\u5931\u8d25:",e),y({title:"\u8fd4\u56de\u5931\u8d25",icon:"error"})}})},te=function(e){var a=v(w).call(w,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},re=function(e){var a=v(C).call(C,function(a){return a.value===e});return a?a.label:"\u4e0d\u9650"},ie=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD";if(!e)return"";var c=e.replace(/[\u6708\u65e5]/g,"-").replace(/-$/,""),s=c.split("-");if(s.length<2)return e;if("MM-DD"===a){var l,n,t,r=g(l=s[0]).call(l,2,"0"),i=g(n=s[1]).call(n,2,"0");return m(t="".concat(r,"-")).call(t,i)}return e},oe=["\u53cc\u5e8a\u623f","\u542b\u65e9\u9910","\u514d\u8d39\u53d6\u6d88","\u4eb2\u5b50\u4f18\u9009","\u667a\u80fd\u5bb6\u5c45","\u6c5f\u666f\u623f","\u5730\u94c1\u5468\u8fb9","\u4e94\u661f\u7ea7","\u6cf3\u6c60"],de=n.useState([]),ue=t(de,2),he=ue[0],me=ue[1],pe=function(e){me(function(a){var c;return N(a).call(a,e)?k(a).call(a,function(a){return a!==e}):m(c=[]).call(c,p(a),[e])})},xe=n.useState(""),je=t(xe,2),Ne=je[0],ve=je[1],fe=n.useState("welcome"),ye=t(fe,2),ge=ye[0],ke=ye[1],be=[{label:"\u6b22\u8fce\u5ea6\u6392\u5e8f",value:"welcome"},{label:"\u597d\u8bc4\u4f18\u5148",value:"rating"},{label:"\u4f4e\u4ef7\u4f18\u5148",value:"price_low"}],Te=function(e){ve(Ne===e?"":e)},we=function(e){ke(e),ve("")};return e.jsxs(a,{className:"list-page",children:[e.jsxs(a,{className:"sticky-header",children:[e.jsx(a,{className:"search-bar",children:e.jsx(a,{className:"search-capsule-container",children:e.jsxs(a,{className:"search-capsule",children:[e.jsx(a,{className:"back-btn",onClick:ne,children:e.jsx(s,{className:"back-icon",children:"\u2b05"})}),e.jsxs(a,{className:"capsule-section city-section",children:[e.jsx(s,{className:"city-name",children:K.city}),e.jsx(a,{className:"section-divider"})]}),e.jsxs(a,{className:"capsule-section date-section",children:[e.jsxs(a,{className:"date-content",children:[e.jsxs(a,{className:"date-container",children:[e.jsx(s,{className:"date-label",children:"\u4f4f"}),e.jsx(s,{className:"date-value",children:ie(K.checkInDate,"MM-DD")||"02-06"})]}),e.jsxs(a,{className:"date-container",children:[e.jsx(s,{className:"date-label",children:"\u79bb"}),e.jsx(s,{className:"date-value",children:ie(K.checkOutDate,"MM-DD")||"02-07"})]})]}),e.jsx(a,{className:"section-divider right-vertical-line"})]}),e.jsx(a,{className:"capsule-section keyword-section",children:e.jsx(s,{className:"keyword-text",children:K.keyword||"\u4f4d\u7f6e/\u54c1\u724c/\u9152\u5e97"})}),e.jsx(a,{className:"search-icon-section",children:e.jsx(s,{className:"search-icon",children:"\ud83d\udd0d"})})]})})}),e.jsx(j,{className:"quick-filter-tags",scrollX:!0,showsHorizontalScrollIndicator:!1,enhanced:!0,scrollWithAnimation:!0,children:e.jsx(a,{className:"tags-container",children:l(oe).call(oe,function(c){return e.jsx(a,{className:"filter-tag ".concat(N(he).call(he,c)?"active":""),hoverClass:"filter-tag--hover",hoverStayTime:80,onClick:function(){return pe(c)},children:e.jsx(s,{className:"tag-text",children:c})},c)})})}),e.jsxs(a,{className:"sort-bar",children:[e.jsxs(a,{className:"sort-item ".concat("welcome"===ge||"welcome"===Ne?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Te("welcome")},children:[e.jsx(s,{className:"sort-text",children:(null===(c=v(be).call(be,function(e){return e.value===ge}))||void 0===c?void 0:c.label)||"\u6b22\u8fce\u5ea6"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("distance"===Ne?"active":""),hoverClass:"sort-item--hover",onClick:function(){return Te("distance")},children:[e.jsx(s,{className:"sort-text",children:"\u4f4d\u7f6e\u8ddd\u79bb"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"})]}),e.jsxs(a,{className:"sort-item ".concat("all"!==K.priceType||"all"!==K.starType?"active":""),hoverClass:"sort-item--hover",onClick:function(){return $(!0)},children:[e.jsx(s,{className:"sort-text",children:"\u4ef7\u683c/\u661f\u7ea7"}),e.jsx(a,{className:"sort-icon",children:"\u25bc"}),("all"!==K.priceType||"all"!==K.starType)&&e.jsx(a,{className:"filter-indicator"})]}),e.jsxs(a,{className:"sort-item",hoverClass:"sort-item--hover",children:[e.jsx(s,{className:"sort-text",children:"\u7b5b\u9009"}),e.jsx(a,{className:"sort-icon",children:"\u2261"})]})]}),e.jsx(f,{visible:"welcome"===Ne,position:"top",onClose:function(){return ve("")},style:{top:"100px"},children:e.jsx(a,{className:"sort-dropdown",children:l(be).call(be,function(c){return e.jsx(a,{className:"dropdown-item ".concat(ge===c.value?"active":""),onClick:function(){return we(c.value)},children:c.label},c.value)})})})]}),(K.keyword||"all"!==K.priceType||"all"!==K.starType)&&e.jsx(a,{className:"filter-summary",children:e.jsxs(s,{className:"summary-text",children:["\u5f53\u524d\u7b5b\u9009:",K.keyword&&' "'.concat(K.keyword,'"'),"all"!==K.priceType&&" \u4ef7\u683c:".concat(te(K.priceType)),"all"!==K.starType&&" \u661f\u7ea7:".concat(re(K.starType))]})}),e.jsx(j,{scrollY:!0,className:"list-scroll",onScrollToLower:se,lowerThreshold:100,children:e.jsxs(a,{className:"list-content",children:[l(_).call(_,function(a){return e.jsx(T,{data:a,onClick:function(){console.log("\u70b9\u51fb\u8be6\u60c5",a.id),r.navigateTo({url:"/pages/detail/index?id=".concat(a.id)})}},a.id)}),e.jsx(a,{className:"loading-tip",children:O?"\u52a0\u8f7d\u4e2d...":H?"\u4e0a\u62c9\u52a0\u8f7d\u66f4\u591a":"\u6ca1\u6709\u66f4\u591a\u4e86"})]})}),e.jsx(f,{visible:X,position:"bottom",round:!0,onClose:function(){return $(!1)},children:e.jsxs(a,{className:"filter-popup",children:[e.jsxs(a,{className:"popup-header",children:[e.jsx(s,{className:"title",children:"\u4ef7\u683c/\u661f\u7ea7\u7b5b\u9009"}),e.jsx(s,{className:"close",onClick:function(){return $(!1)},children:"\u2715"})]}),e.jsxs(j,{scrollY:!0,className:"popup-body",children:[e.jsxs(a,{className:"section",children:[e.jsx(s,{className:"section-title",children:"\u4ef7\u683c\u9884\u7b97"}),e.jsx(a,{className:"tags-grid",children:l(w).call(w,function(c){return e.jsx(a,{className:"tag ".concat(G.price===c.value?"active":""),onClick:function(){return Z(function(e){return o(o({},e),{},{price:c.value})})},children:c.label},c.value)})})]}),e.jsxs(a,{className:"section",children:[e.jsx(s,{className:"section-title",children:"\u661f\u7ea7\u6807\u51c6"}),e.jsx(a,{className:"tags-grid",children:l(C).call(C,function(c){return e.jsx(a,{className:"tag ".concat(G.star===c.value?"active":""),onClick:function(){return Z(function(e){return o(o({},e),{},{star:c.value})})},children:c.label},c.value)})})]})]}),e.jsxs(a,{className:"popup-footer",children:[e.jsx(a,{className:"btn reset",onClick:function(){return Z({price:"all",star:"all"})},children:"\u91cd\u7f6e"}),e.jsx(a,{className:"btn confirm",onClick:le,children:"\u67e5\u770b\u9152\u5e97"})]})]})})]})}export{D as default};
